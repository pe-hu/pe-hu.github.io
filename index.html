<!DOCTYPE html>
<html lang="ja">

<head>
    <title>✌︎ for 未来</title>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="∧° ┐">
    <meta name="description" content="Peace for Future">

    <link rel="icon" href="icon.png">
    <link rel="stylesheet" href="index.css" />
    <link rel="stylesheet" href="sky.css" />
    <link rel="stylesheet" href="rainbow.css" />
    <link rel="stylesheet" href="fontmotion.css" />

    <style>

    </style>
</head>

<body>
    <header id="header">
        <nav id="nav">
        </nav>
    </header>
    <main id="main" class="sky">
        <h1 class="">
            <span>P</span>
            <span>e</span>
            <span>a</span>
            <span>c</span>
            <span>e</span>
            <span>　</span>
            <span>f</span>
            <span>o</span>
            <span>r</span>
            <span>　</span>
            <span>F</span>
            <span>u</span>
            <span>t</span>
            <span>u</span>
            <span>r</span>
            <span>e</span>
        </h1>
    </main>

    <footer id="footer">
        Today,
        <script>
            //現在の天気を取得する場所の名前
            let targetCityName = "osaka";
            let appId = "557b466129cf7d7427b03e5b7886a4bb";

            const requestUrl = "https://api.openweathermap.org/data/2.5/weather?q=" + targetCityName + "&appid=" + appId + "/";

            //Ajax通信用のオブジェクトを作成
            let xhr = new XMLHttpRequest();

            //通信方式とURLを設定
            xhr.open("GET", requestUrl);

            //通信を実行する
            xhr.send();

            //通信ステータスが変わったら実行される関数
            xhr.onreadystatechange = function() {
                //通信が完了
                if (xhr.readyState == 4) {
                    ShowTodaysWeather(xhr.responseText);
                }
            }

            /**
             * 今日の天気を表示する
             */
            function ShowTodaysWeather(response) {

                let obj = JSON.parse(response);

                let weather = obj.weather[0].description;
                let city = obj.name;
                let temp = obj.main.temp;

                console.log("現在の" + city + "の天気は" + weather);
                console.log("気温は" + temp + "度です。");

            }
        </script>
    </footer>
</body>

</html>